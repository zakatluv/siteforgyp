<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computer Disassembly</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="video-container">
        <video id="video" src="рендер-для-сайта.mp4" width="1920" height="1080"></video>
    </div>
    <div class="content-container">
        <section class="component" id="component-1">
            <h2>Кулеры</h2>
            <p>Кулеры помогают охлаждать компьютер, предотвращая перегрев. Они установлены на процессоре и других важных компонентах, чтобы обеспечить стабильную работу устройства.</p>
        </section>
        <div class="spacer"></div>
        <section class="component" id="component-2">
            <h2>Блок питания</h2>
            <p>Блок питания обеспечивает компьютер электроэнергией. Он преобразует электричество из розетки в напряжение, необходимое для работы всех компонентов компьютера.</p>
        </section>
        <div class="spacer"></div>
        <section class="component" id="component-3">
            <h2>ОЗУ</h2>
            <p>Оперативная память (ОЗУ) временно хранит данные, с которыми компьютер работает в данный момент. Это позволяет быстро получать доступ к нужной информации и улучшает производительность.</p>
        </section>
        <div class="spacer"></div>
        <section class="component" id="component-4">
            <h2>Видеокарта</h2>
            <p>Видеокарта обрабатывает графику и выводит изображение на экран. Она особенно важна для игр и работы с графикой, так как ускоряет обработку визуальных данных.</p>
        </section>
        <div class="spacer"></div>
        <section class="component" id="component-5">
            <h2>Процессор</h2>
            <p>Процессор — это "мозг" компьютера. Он выполняет вычисления и обрабатывает данные, необходимые для работы программ и выполнения задач. Чем мощнее процессор, тем быстрее работает компьютер.</p>
        </section>
        <div class="spacer"></div>
        <section class="component" id="component-6">
            <h2>Материнская плата</h2>
            <p>Материнская плата — это основной компонент компьютера, который соединяет все части вместе. Она позволяет всем компонентам общаться друг с другом и работать как единое целое.</p>
        </section>
        <div class="spacer"></div>
    </div>
    <div class="navigation-buttons">
        <button id="scroll-up">↑</button>
        <button id="scroll-down">↓</button>
    </div>
    <div class="dropdown">
        <button class="dropbtn">Меню</button>
        <div class="dropdown-content">
            <a href="history.html">История компьютеров</a>
            <a href="internet.html">Как работает интернет</a>
            <a href="software.html">Типы программного обеспечения</a>
            <a href="cybersecurity.html">Основы кибербезопасности</a>
            <a href="robots.html">Интересные факты о роботах</a>
            <a href="statistics.html">Статистика</a>
            <a href="tasks.html">Контроль знаний</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.2/ScrollToPlugin.min.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const video = document.getElementById("video");
            const components = document.querySelectorAll(".component");
            const componentTimes = [3, 6, 9, 12, 17, 22, 26]; // updated times in seconds for each component
            const scrollDuration = 2.0; // More smooth and slower scroll duration
            const scrollPause = 1000; // Increased pause duration to ensure stopping
    
            video.addEventListener("loadedmetadata", () => {
                video.pause();
            });
    
            let options = {
                threshold: 0.5
            };
    
            let observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        let index = Array.from(components).indexOf(entry.target);
                        gsap.to(video, {
                            currentTime: componentTimes[index],
                            duration: 1,
                            onUpdate: function() {
                                if (video.currentTime >= componentTimes[index]) {
                                    video.pause();
                                }
                            }
                        });
                        entry.target.classList.add("visible");
                    }
                });
            }, options);
    
            components.forEach(component => {
                observer.observe(component);
            });
    
            let currentComponentIndex = 0;
    
            document.getElementById("scroll-up").addEventListener("click", () => {
                if (currentComponentIndex > 0) {
                    currentComponentIndex--;
                    scrollToComponent(currentComponentIndex);
                } else {
                    scrollToTop();
                }
            });
    
            document.getElementById("scroll-down").addEventListener("click", () => {
                if (currentComponentIndex < components.length - 1) {
                    currentComponentIndex++;
                    scrollToComponent(currentComponentIndex);
                }
            });
    
            function scrollToComponent(index) {
                gsap.to(window, {
                    scrollTo: components[index],
                    duration: scrollDuration,
                    onComplete: function() {
                        setTimeout(() => {
                            isScrolling = false;
                        }, scrollPause);
                    }
                });
            }
    
            function scrollToTop() {
                gsap.to(window, {
                    scrollTo: { y: 0 },
                    duration: scrollDuration,
                    onComplete: function() {
                        setTimeout(() => {
                            isScrolling = false;
                        }, scrollPause);
                    }
                });
                gsap.to(video, {
                    currentTime: 0,
                    duration: 1,
                    onUpdate: function() {
                        if (video.currentTime <= 0) {
                            video.pause();
                        }
                    }
                });
            }
    
            function scrollToBottom() {
                gsap.to(window, {
                    scrollTo: { y: document.body.scrollHeight },
                    duration: scrollDuration,
                    onComplete: function() {
                        setTimeout(() => {
                            isScrolling = false;
                        }, scrollPause);
                    }
                });
                gsap.to(video, {
                    currentTime: video.duration,
                    duration: 1,
                    onUpdate: function() {
                        if (video.currentTime >= video.duration) {
                            video.pause();
                        }
                    }
                });
            }
    
            window.addEventListener('scroll', function() {
                if (window.scrollY === 0) {
                    scrollToTop();
                }
                if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
                    scrollToBottom();
                }
            });
    
            document.addEventListener("DOMContentLoaded", function() {
                const dropdown = document.querySelector(".dropdown");
                dropdown.addEventListener("mouseover", function() {
                    this.querySelector(".dropdown-content").style.display = "block";
                });
                dropdown.addEventListener("mouseout", function() {
                    this.querySelector(".dropdown-content").style.display = "none";
                });
            });
        });
    </script>
</body>
</html>
